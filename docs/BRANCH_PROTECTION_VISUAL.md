# Branch Protection Visual Guide

## ğŸŒ³ Repository Structure

```
GitHub Repository: ai-counsellor-mvp
â”‚
â”œâ”€â”€ main (production) ğŸ”’
â”‚   â”œâ”€â”€ Protected: 2 approvals required
â”‚   â”œâ”€â”€ Only YOU can merge
â”‚   â””â”€â”€ Auto-deploys to production
â”‚
â”œâ”€â”€ develop (staging) ğŸ”’
â”‚   â”œâ”€â”€ Protected: 1 approval required
â”‚   â”œâ”€â”€ Team leads can merge
â”‚   â””â”€â”€ Auto-deploys to staging
â”‚
â””â”€â”€ feature/* (intern work) âœï¸
    â”œâ”€â”€ feature/frontend/login-page
    â”œâ”€â”€ feature/backend/student-api
    â””â”€â”€ Anyone can create and push
```

## ğŸ”„ Workflow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Intern    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Creates feature branch
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ feature/frontend/login-page â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 2. Pushes code
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  GitHub PR   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 3. Requests review
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Team Lead   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 4. Reviews & approves
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   develop    â”‚ â† Merge here
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 5. Test on staging
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  YOU review  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 6. Create PR to main
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     main     â”‚ â† Final merge
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 7. Auto-deploy
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Production  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ‘¥ Access Control

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Repository                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Frontend   â”‚  â”‚   Backend    â”‚            â”‚
â”‚  â”‚     Team     â”‚  â”‚     Team     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                  â”‚                     â”‚
â”‚         â”‚  Write Access    â”‚                     â”‚
â”‚         â†“                  â†“                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚     src/app/                    â”‚            â”‚
â”‚  â”‚     src/components/             â”‚            â”‚
â”‚  â”‚     src/lib/services/           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚      Branch Protection            â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚           â”‚
â”‚  â”‚  â”‚  main  â”‚  â”‚ developâ”‚          â”‚           â”‚
â”‚  â”‚  â”‚  ğŸ”’    â”‚  â”‚  ğŸ”’    â”‚          â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚     YOU      â”‚ â† Full Admin Access           â”‚
â”‚  â”‚  (Founder)   â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ Directory Ownership

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (marketing)/     â† Frontend Team âœï¸
â”‚   â”œâ”€â”€ (dashboard)/     â† Frontend Team âœï¸
â”‚   â”œâ”€â”€ (auth)/          â† Frontend Team âœï¸
â”‚   â””â”€â”€ api/             â† Backend Team âœï¸
â”‚
â”œâ”€â”€ components/          â† Frontend Team âœï¸
â”‚   â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ forms/
â”‚   â””â”€â”€ chat/
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ hooks/           â† Frontend Team âœï¸
â”‚   â”œâ”€â”€ services/        â† Backend Team âœï¸
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ student/
â”‚   â”‚   â””â”€â”€ counselling/
â”‚   â”œâ”€â”€ config/          â† Backend Team âœï¸
â”‚   â””â”€â”€ utils/           â† Shared ğŸ‘ï¸
â”‚
â””â”€â”€ types/               â† Shared (Both teams propose) ğŸ“
```

**Legend:**
- âœï¸ = Full write access
- ğŸ‘ï¸ = Read only
- ğŸ“ = Can propose changes via PR
- ğŸ”’ = Protected branch

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layer 1                 â”‚
â”‚    Branch Protection Rules               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Require PR reviews             â”‚    â”‚
â”‚  â”‚ â€¢ Require status checks          â”‚    â”‚
â”‚  â”‚ â€¢ Restrict who can push          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layer 2                 â”‚
â”‚         CODEOWNERS File                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Auto-assign reviewers          â”‚    â”‚
â”‚  â”‚ â€¢ Require owner approval         â”‚    â”‚
â”‚  â”‚ â€¢ Track responsibility           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layer 3                 â”‚
â”‚         GitHub Actions CI/CD             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Automated testing              â”‚    â”‚
â”‚  â”‚ â€¢ Code quality checks            â”‚    â”‚
â”‚  â”‚ â€¢ Build verification             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layer 4                 â”‚
â”‚      Environment Separation              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Dev Appwrite (interns)         â”‚    â”‚
â”‚  â”‚ â€¢ Staging Appwrite (leads)       â”‚    â”‚
â”‚  â”‚ â€¢ Prod Appwrite (you only)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Quick Setup Checklist

```
Setup Phase 1: GitHub Repository
â”œâ”€â”€ âœ… Create repository on GitHub
â”œâ”€â”€ âœ… Push code to main branch
â”œâ”€â”€ âœ… Create develop branch
â””â”€â”€ âœ… Set develop as default branch

Setup Phase 2: Branch Protection
â”œâ”€â”€ âœ… Protect main (2 approvals)
â”œâ”€â”€ âœ… Protect develop (1 approval)
â”œâ”€â”€ âœ… Enable status checks
â””â”€â”€ âœ… Restrict push access

Setup Phase 3: Code Ownership
â”œâ”€â”€ âœ… Create .github/CODEOWNERS
â”œâ”€â”€ âœ… Define team ownership
â”œâ”€â”€ âœ… Commit to repository
â””â”€â”€ âœ… Verify auto-assignment works

Setup Phase 4: Team Access
â”œâ”€â”€ âœ… Invite team members
â”œâ”€â”€ âœ… Assign roles (Write access)
â”œâ”€â”€ âœ… Create teams (optional)
â””â”€â”€ âœ… Share dev credentials

Setup Phase 5: CI/CD
â”œâ”€â”€ âœ… Create GitHub Actions workflow
â”œâ”€â”€ âœ… Add repository secrets
â”œâ”€â”€ âœ… Test workflow runs
â””â”€â”€ âœ… Verify checks block merges

Setup Phase 6: Documentation
â”œâ”€â”€ âœ… Update README
â”œâ”€â”€ âœ… Create CONTRIBUTING.md
â”œâ”€â”€ âœ… Create ONBOARDING.md
â””â”€â”€ âœ… Share with team
```

## ğŸ“Š Permission Matrix

| Resource | Interns | Team Leads | You |
|----------|---------|------------|-----|
| **Repository** |
| Clone | âœ… | âœ… | âœ… |
| View code | âœ… | âœ… | âœ… |
| Create branches | âœ… | âœ… | âœ… |
| Push to feature/* | âœ… | âœ… | âœ… |
| Push to develop | âŒ | âŒ | âŒ |
| Push to main | âŒ | âŒ | âŒ |
| **Pull Requests** |
| Create PR | âœ… | âœ… | âœ… |
| Review PR | âŒ | âœ… | âœ… |
| Approve PR | âŒ | âœ… | âœ… |
| Merge to develop | âŒ | âœ… | âœ… |
| Merge to main | âŒ | âŒ | âœ… |
| **Settings** |
| Repository settings | âŒ | âŒ | âœ… |
| Branch protection | âŒ | âŒ | âœ… |
| Secrets | âŒ | âŒ | âœ… |
| **Environments** |
| Dev Appwrite | ğŸ‘ï¸ | ğŸ‘ï¸ | âœ… |
| Staging Appwrite | âŒ | ğŸ‘ï¸ | âœ… |
| Prod Appwrite | âŒ | âŒ | âœ… |
| Deploy to prod | âŒ | âŒ | âœ… |

**Legend:**
- âœ… = Full access
- ğŸ‘ï¸ = Read-only access
- âŒ = No access

---

This visual guide complements the detailed step-by-step instructions!
